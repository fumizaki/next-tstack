# Networking モジュール

このモジュールは、AWS上にアプリをデプロイするためのネットワーク基盤（VPC、サブネット、ゲートウェイ、ルートテーブルなど）を構築します。

## 1. VPC (Virtual Private Cloud)

* VPCは、AWSクラウド上で仮想ネットワークを作成し、独立したネットワーク環境を提供します。
* CIDRブロックを指定し、IPアドレス範囲を定義します。（例: `10.0.0.0/16`）
* VPC内には複数のサブネット（パブリック・プライベート）を配置し、異なる用途に応じてトラフィックを分離します。
* `enable_dns_hostnames` と `enable_dns_support` を有効にすることで、VPC内のリソースがDNS解決を利用できます。

## 2. サブネット

### パブリックサブネット
* インターネットゲートウェイ (IGW) に接続され、外部インターネットと通信可能。
* `map_public_ip_on_launch = true` に設定することで、EC2インスタンスがパブリックIPを取得可能。
* WebサーバーやALB (Application Load Balancer) を配置するために使用。

### プライベートサブネット
* インターネットに直接アクセスできないサブネット。
* NAT Gateway や VPCエンドポイントを利用して外部との通信を行う。
* ECSタスク（コンテナ）やRDS（データベース）など、外部に公開しないリソースを配置。

## 3. インターネットゲートウェイ (IGW)

* インターネットとの通信を可能にするゲートウェイ。
* VPCにアタッチされ、パブリックサブネットからのトラフィックをルーティング。
* ルートテーブルで `0.0.0.0/0` のトラフィックをIGWに転送することで通信が有効化される。

## 4. ルートテーブル

* サブネット内のトラフィックを管理し、適切なゲートウェイへルーティングする。

### パブリックルートテーブル
* `0.0.0.0/0` のトラフィックを `Internet Gateway` に転送するルールを設定。
* すべてのパブリックサブネットに関連付け。

### プライベートルートテーブル (未実装)
* NAT Gateway または VPCエンドポイントを利用する場合は別途作成。

## 5. アベイラビリティゾーン (AZ)

* サブネットはAWSリージョン内の異なるアベイラビリティゾーンに分散。
* 高可用性を確保するため、複数のAZにサブネットを作成する。

## 6. 変数一覧

| 変数名 | 説明 |
|--------|------|
| `project_name` | プロジェクト名 (タグ用) |
| `environment` | 環境名 (dev, staging, prod) |
| `vpc_cidr` | VPCのCIDRブロック (例: `10.0.0.0/16`) |
| `public_subnet_cidrs` | パブリックサブネットのCIDRブロックリスト |
| `private_subnet_cidrs` | プライベートサブネットのCIDRブロックリスト |

このモジュールは、ECSやALBと連携し、アプリケーションのネットワーク基盤を構築するために利用されます。

